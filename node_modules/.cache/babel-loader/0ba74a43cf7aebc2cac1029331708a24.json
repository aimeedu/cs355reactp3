{"ast":null,"code":"var _jsxFileName = \"/Users/aimeedu/WebstormProjects/cs355reactp3/src/components/SearchEngine.js\";\nimport React, { Component } from 'react';\nimport { Button, Form, FormControl } from \"react-bootstrap\";\nimport './Components.css';\nimport Download from \"./Download\";\nimport axios from \"axios\";\n\nclass SearchEngine extends Component {\n  constructor(props) {\n    super(props);\n\n    this.search = async e => {\n      e.preventDefault();\n      const term = e.target.elements.userInput.value;\n      const username = e.target.elements.userInput.value;\n      this.setState({\n        term\n      }); // console.log(term);\n\n      const api_call = await fetch(\"http://localhost:5000/admin/\".concat(term));\n      const data = await api_call.json();\n      const searchFreq = data.length;\n      console.log(searchFreq);\n      /** send the term to back end */\n\n      axios.post('http://localhost:5000/custom', {\n        term: term,\n        searchFreq: searchFreq\n      }).then(res => {\n        console.log(res.data); // console.log('Pass term to back end!');\n      });\n      this.setState({\n        data: data\n      });\n      console.log(this.state.data);\n    };\n\n    this.checkBox = event => {\n      const index = event.target.dataset.index;\n      this.setState(state => {\n        const data = [...state.data];\n        const object = state.data[index];\n        object.isChecked = !object.isChecked;\n        data.splice(index, 1, object);\n        return {\n          data\n        };\n      });\n      console.log(this.state.data); // this.setState({\n      //     data\n      // })\n    };\n\n    this.checkCase = () => {\n      this.setState({\n        caseInsensitive: !this.state.caseInsensitive\n      });\n      console.log(this.state.caseInsensitive);\n    };\n\n    this.checkMatch = () => {\n      this.setState({\n        partialMatch: !this.state.partialMatch\n      });\n      console.log(this.state.partialMatch);\n    };\n\n    this.state = {\n      caseInsensitive: false,\n      partialMatch: false,\n      term: null,\n      data: []\n    };\n  }\n  /** Here, we are using $text and $search MongoDB operators for find all documents in collection collectionName which contains at least one word from the specified find query.\n   partial search */\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"My Custom Search Engine\"), React.createElement(\"div\", {\n      className: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: \"case\",\n      onChange: this.checkCase,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), \" Case Insensitive \"), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: \"match\",\n      onChange: this.checkMatch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), \" Allow Partial Match \")), React.createElement(Form, {\n      className: \"search\",\n      onSubmit: this.search,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      className: \"mr-sm-1 searchBar\",\n      type: \"text\",\n      placeholder: \"Type a word to Search.\",\n      name: \"userInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(Button, {\n      id: \"searchBtn\",\n      variant: \"btn btn-light purple-btn\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Search\")), React.createElement(Download, {\n      data: this.state.data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \" Search Term: \", this.state.term), this.state.data.length === 0 ? React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"\\\"No results in DB for \", this.state.term, \"!\\\"\") : React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, this.state.data.map((data, i) => {\n      return React.createElement(\"div\", {\n        key: i,\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-sm-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        \"data-index\": i,\n        id: \"ch\",\n        className: \"checkbox\",\n        type: \"checkbox\",\n        name: \"check\",\n        onChange: this.checkBox,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, data.wordname), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Title: \", data.title), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Description: \", data.description), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: data.url,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, data.url)), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"id: \", data._id), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Created At: \", data.createdAt), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Time to Search: \"))));\n    })));\n  }\n\n}\n\nexport default SearchEngine;","map":{"version":3,"sources":["/Users/aimeedu/WebstormProjects/cs355reactp3/src/components/SearchEngine.js"],"names":["React","Component","Button","Form","FormControl","Download","axios","SearchEngine","constructor","props","search","e","preventDefault","term","target","elements","userInput","value","username","setState","api_call","fetch","data","json","searchFreq","length","console","log","post","then","res","state","checkBox","event","index","dataset","object","isChecked","splice","checkCase","caseInsensitive","checkMatch","partialMatch","render","map","i","wordname","title","description","url","_id","createdAt"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Button, Form, FormControl} from \"react-bootstrap\";\nimport './Components.css';\nimport Download from \"./Download\";\nimport axios from \"axios\";\n\nclass SearchEngine extends Component {\n\n    constructor(props){\n        super(props);\n        this.state = {\n            caseInsensitive: false,\n            partialMatch: false,\n            term: null,\n            data:[],\n\n        }\n    }\n    /** Here, we are using $text and $search MongoDB operators for find all documents in collection collectionName which contains at least one word from the specified find query.\n     partial search */\n    search = async (e) => {\n        e.preventDefault();\n        const term = e.target.elements.userInput.value;\n        const username = e.target.elements.userInput.value;\n        this.setState({\n            term\n        })\n        // console.log(term);\n\n        const api_call = await fetch(`http://localhost:5000/admin/${term}`);\n        const data = await api_call.json();\n        const searchFreq = data.length;\n        console.log(searchFreq);\n\n        /** send the term to back end */\n        axios.post('http://localhost:5000/custom', {term:term, searchFreq:searchFreq})\n            .then((res)=>{\n                console.log(res.data);\n                // console.log('Pass term to back end!');\n            });\n        this.setState({\n            data: data\n        })\n        console.log(this.state.data);\n\n    }\n    // a controlled form handles all form changes via state, which is a very React way of doing things.\n    checkBox = (event) => {\n\n        const index = event.target.dataset.index;\n\n        this.setState(state => {\n            const data = [...state.data];\n            const object = state.data[index];\n            object.isChecked = !object.isChecked;\n            data.splice(index, 1, object);\n            return {\n                data\n            }\n        })\n\n        console.log(this.state.data);\n        // this.setState({\n        //     data\n        // })\n    }\n\n    checkCase = () => {\n        this.setState({\n            caseInsensitive: !this.state.caseInsensitive,\n        })\n        console.log(this.state.caseInsensitive);\n    }\n\n    checkMatch = () => {\n        this.setState({\n            partialMatch: !this.state.partialMatch,\n        })\n        console.log(this.state.partialMatch);\n    }\n\n    render() {\n        return (\n            <div>\n                <h2>My Custom Search Engine</h2>\n\n                <div className=\"checkbox\">\n                    <label><input type=\"checkbox\" name=\"case\" onChange={this.checkCase}/> Case Insensitive </label>\n                    <label><input type=\"checkbox\" name=\"match\" onChange={this.checkMatch}/> Allow Partial Match </label>\n                </div>\n\n\n                <Form className=\"search\" onSubmit={this.search}>\n                    <FormControl className=\"mr-sm-1 searchBar\" type=\"text\" placeholder=\"Type a word to Search.\" name=\"userInput\"/>\n                    <Button id=\"searchBtn\" variant=\"btn btn-light purple-btn\" type=\"submit\">Search</Button>\n                </Form>\n\n                <Download data={this.state.data} />\n<br/>\n                <h3> Search Term: {this.state.term}</h3>\n\n                {/*\\ when click search button*/}\n                {/*    pass the term to backend, insert into search table/ done*/}\n                {/*    query the page table. find all the entries with certain words.*/}\n                {/*    display the result*/}\n                {/*    download the result*/}\n\n                {this.state.data.length === 0? <h3>\"No results in DB for {this.state.term}!\"</h3>:\n                <div className=\"container\">\n\n                    {this.state.data.map((data, i) => {\n                        return (\n                            <div key={i} className=\"row\">\n                                <div className=\"col-sm-2\"></div>\n                                <div className=\"col-sm-8\">\n                                    <div className=\"box\">\n                                        <input data-index={i} id=\"ch\" className=\"checkbox\" type=\"checkbox\" name=\"check\" onChange={this.checkBox}/>\n                                        {/*<button className=\"btn btn-outline-primary\" data-index={i} onClick={this.delete}> Delete </button>*/}\n                                        <h4>{data.wordname}</h4>\n                                        <h4>Title: {data.title}</h4>\n                                        <h4>Description: {data.description}</h4>\n                                        <h5><a href={data.url}>{data.url}</a></h5>\n                                        <h5>id: {data._id}</h5>\n                                        <h5>Created At: {data.createdAt}</h5>\n                                        <h5>Time to Search: </h5>\n                                    </div>\n                                </div>\n                            </div>\n                        )\n                    })}\n                </div>\n                }\n            </div>\n        )\n    }\n}\n\nexport default SearchEngine;"]},"metadata":{},"sourceType":"module"}